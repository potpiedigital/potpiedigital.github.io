language: node_js
node_js:
  - 8.11.2
before_install:
  - YARN_VERSION=`node -pe "require('./package.json').engines.yarn"`
  - curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version $YARN_VERSION
  - export PATH=$HOME/.yarn/bin:$PATH
cache:
  yarn: true
script:
  - yarn lint
  - yarn test
env:
  global:
  - secure: Ui9IqbyJ4nZlW/cC36hcCRJAnscYA/BGXH79DN01fQ87yXDKMJrz5UCoUhxC2Czm1HrWotdD9aItlhVxvC2UFmeHgGFFgmUGe8U3Uzf3XCiWn59wF+FGEudUvfYtW1u7ecoT3g9rxgysJeXi0FUkPApf4bbGlXU55O0w0ZQjjKpqrR+CnfCahZUUk9a5d2jf2PWEi1his4PNILWGaECQayxE8aiSvyMMqCye1FBNACpngfOLs+KgRKoH44HJfpEC3wC+pohA87LBJkkR7MI+1cbLKqqjkoyq5bZbtB0qKNyyQ4zD2BS5wrgnvNDdSlofg+xhwEWWQQdLqd1CHMY67+sLhkfzOyFGFodxRkrc1Qz9hnXLhW8PFcwsR/biaeMwmWh+hujo+SpxJ9yOKAdOfXkR6b24ARKHcPfAtHUb195I4X1MWmyNDtw1YLXDlZTnZaooxUbhbGjmS0/MaW54p5/44Sz4ysIoNUiMRUMF7UXv1aqzCWEW3k6glqXjJBM2ArN9ntZBJo+RZZtaTjE80tmjp2VErVlJAIEmzG0TyDBd6qBae5GYgSf7+rnV8KEhh2G9u0JfPP1cdaZTvXg23Gr34/S022S+k3cH0zVKYGdX6ZBmAAT5cAZqfVKn18pkJ9CM4Q6uU21PpBIu7ZwzlIVAqdYC+nf9R/cOEmKzqUw=
before_deploy:
  - yarn clean
  - yarn build
deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GITHUB_TOKEN
  keep-history: true
  on:
    branch: develop
  target-branch: master
  allow-empty-commit: true
  local-dir: public/
